BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE EMPLOYEES';

    EXCEPTION
        WHEN OTHERS THEN
        IF SQLCODE = -00942 THEN
            NULL;
        ELSE
            RAISE;
        END IF;
END;
/

BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE MANAGERS';

    EXCEPTION
        WHEN OTHERS THEN
        IF SQLCODE = -00942 THEN
            NULL;
        ELSE
            RAISE;
        END IF;
END;
/

CREATE TABLE MANAGERS (

    ID_MANAGER NUMBER(8, 0) GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1 CACHE 20) CONSTRAINT PK_MANAGERS PRIMARY KEY,
    DS_NAME VARCHAR2(20 CHAR) NOT NULL,
    DS_LASTNAME VARCHAR2(20 CHAR) NOT NULL
);

CREATE TABLE EMPLOYEES (
    ID_EMPLOYEE NUMBER(8, 0) GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1 CACHE 20) CONSTRAINT PK_EMPLOYEES PRIMARY KEY,
    DS_NAME VARCHAR2(20 CHAR) NOT NULL,
    DS_LASTNAME VARCHAR2(20 CHAR) NOT NULL,
    MT_SALARY NUMBER(5,0) NOT NULL,
    FL_ACTIVE NUMBER(1, 0) NOT NULL,
    ID_MANAGER NUMBER(8, 0) CONSTRAINT FK_EMPLOYEES_MANAGER REFERENCES MANAGERS(ID_MANAGER),
    DT_EMPLOYMENT DATE DEFAULT SYSDATE NOT NULL,
    DT_RESIGNATION DATE
);

CREATE INDEX IX_EMPLOYEES_MANAGER ON EMPLOYEES (ID_MANAGER);


INSERT INTO MANAGERS(
    ID_MANAGER,
    DS_NAME,
    DS_LASTNAME
  )
VALUES
  (
    1,
    'William',
    'Nicholson'
  );

INSERT INTO MANAGERS(
    ID_MANAGER,
    DS_NAME,
    DS_LASTNAME
  )
VALUES
  (
    2,
    'Robin',
    'Meza'
  );

INSERT INTO MANAGERS(
    ID_MANAGER,
    DS_NAME,
    DS_LASTNAME
  )
VALUES
  (
    3,
    'Alexander',
    'Mccarty'
  );



INSERT INTO EMPLOYEES(
    DS_NAME,
    DS_LASTNAME,
    MT_SALARY,
    FL_ACTIVE,
    ID_MANAGER,
    DT_EMPLOYMENT,
    DT_RESIGNATION
  )
VALUES
  (
    'Jana',
    'Osborne',
    40000,
    1,
    1,
    SYSDATE - 300,
    NULL
  );

INSERT INTO EMPLOYEES(
    DS_NAME,
    DS_LASTNAME,
    MT_SALARY,
    FL_ACTIVE,
    ID_MANAGER,
    DT_EMPLOYMENT,
    DT_RESIGNATION
  )
VALUES
  (
    'Dean',
    'Riggs',
    30000,
    1,
    3,
    SYSDATE - 11,
    NULL
  );

INSERT INTO EMPLOYEES(
    DS_NAME,
    DS_LASTNAME,
    MT_SALARY,
    FL_ACTIVE,
    ID_MANAGER,
    DT_EMPLOYMENT,
    DT_RESIGNATION
  )
VALUES
  (
    'Francesca',
    'Bonner',
    25000,
    1,
    3,
    SYSDATE - 50,
    NULL
  );

INSERT INTO EMPLOYEES(
    DS_NAME,
    DS_LASTNAME,
    MT_SALARY,
    FL_ACTIVE,
    ID_MANAGER,
    DT_EMPLOYMENT,
    DT_RESIGNATION
  )
VALUES
  (
    'Norman',
    'Mccormick',
    15000,
    1,
    2,
    SYSDATE - 100,
    NULL
  );

INSERT INTO EMPLOYEES(
    DS_NAME,
    DS_LASTNAME,
    MT_SALARY,
    FL_ACTIVE,
    ID_MANAGER,
    DT_EMPLOYMENT,
    DT_RESIGNATION
  )
VALUES
  (
    'Norman',
    'Smith',
    55000,
    0,
    1,
    SYSDATE-365,
    SYSDATE-36
  );
